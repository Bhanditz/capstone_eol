= javascript_include_tag 'jquery-1.6.1.min'
= javascript_include_tag 'jplayer/js/jquery.jplayer.min'

%link{:href=>"/javascripts/jplayer/skin/jplayer.blue.monday.css", :rel=>"stylesheet", :type=>"text/css"}


- if type == 'big'
  .jp-jplayer{:id => "jquery_jplayer_1"}  
  .jp-audio{}
    .jp-type-single{}
      .jp-interface{:id => "jp_interface_1"}
        %ul{:class => "jp-controls"}
          %li
            %a{:href => '#', :class => "jp-play", :tabindex => "1"}= 'play'
          %li
            %a{:href => '#', :class => "jp-pause", :tabindex => "1"}= 'pause'
          %li
            %a{:href => '#', :class => "jp-stop", :tabindex => "1"}= 'stop'
          %li
            %a{:href => '#', :class => "jp-mute", :tabindex => "1"}= 'mute'
          %li
            %a{:href => '#', :class => "jp-unmute", :tabindex => "1"}= 'unmute'
        .jp-progress
          .jp-seek-bar
            .jp-play-bar
        .jp-volume-bar
          .jp-volume-bar-value
        .jp-current-time
        .jp-duration
      .jp-playlist{:id => "jp_playlist_1"}
        %ul
          %li= ""
- else
  %br
  %br
  %br
  %a{:href => '#', :id => "play"}= 'play'
  %a{:href => '#', :id => "pause"}= 'pause'
  |
  %a{:href => '#', :id => "stop"}= 'stop'
  |
  %a{:href => '#', :id => "mute"}= 'mute'
  %a{:href => '#', :id => "unmute"}= 'unmute'
  .jp-jplayer{:id => "jquery_jplayer_2"}  


:javascript
  $(document).ready(function(){

    $("#jquery_jplayer_1").jPlayer({
      ready: function () {
        $(this).jPlayer("setMedia", {
          mp3: "#{sound_url}"
        }).jPlayer(""); // put 'play' here to auto-play
      },
      ended: function (event) {
        //$(this).jPlayer("play");
      },
      swfPath: "/javascripts/jplayer/js",
      supplied: "mp3"
    });

    $("#jquery_jplayer_2").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
      mp3: "#{sound_url}"
      });
    },
    swfPath: "/javascripts/jplayer/js",
    supplied: "mp3",
    cssSelectorAncestor: "",
    cssSelector: {
      play: "#play",
      pause: "#pause",
      stop: "#stop",
      videoPlay: "",
      seekBar: "",
      playBar: "",
      mute: "#mute",
      unmute: "#unmute",
      volumeBar: "",
      volumeBarValue: "",
      currentTime: "#currentTime",
      duration: "#duration"
    }
    });
  });
