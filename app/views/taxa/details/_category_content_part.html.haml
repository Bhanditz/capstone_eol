- unless dato.object_title.blank?
  %h4= dato.object_title
.meta.learn_more
  %p= link_to I18n.t(:article_more_about), data_object_path(dato)
  - langs = dato.available_translation_languages(current_user)
  - if langs && !langs.empty?
    %form
      %label= I18n.t(:language)
      %select{:onchange => "javascript:document.location.href = this.options[this.selectedIndex].value;"}
        - langs.each do |lang|
          %option{:value =>  set_language_url(:language => lang.iso_639_1)+"&return_to=/pages/#{@taxon_concept.id}/details", :selected => lang.iso_639_1 == current_user.language_abbr}
            = lang.source_form
  - tr_source = dato.translation_source
  - if tr_source
    %p.last= link_to I18n.t(:view_translation_source_link), set_language_url(:language => tr_source.language.iso_639_1)+"&return_to=/data_objects/#{tr_source.id}"
= render :partial => 'data_objects/data_object_article', :locals => { :data_object => dato , :show_view_source => 'false'}
.meta.attribution
  = render :partial => 'data_objects/attribution_minimal', :locals => { :data_object => dato }
= render :partial => 'data_objects/rating', :locals => { :data_object => dato }
= render :partial => 'shared/add_to_my_collection', :locals => { :item => dato, :my_collection => @watch_collection }

%p.actions
  - if current_user.is_curator?
    = link_to I18n.t(:curate_this_text) + " (FIXME)", '/placeholder'
  = link_to I18n.t(:leave_a_comment) + " (FIXME)", '/placeholder', :class => 'button comment'
-# TODO - ActivityLog - This needs to be a comment form block
= 'FIXME comment form goes here. When form.comment is here then HR JS will hide it by default and display the leave comment button'
%p= link_to I18n.t(:see_all_comments_with_count_for_text, :count => dato.all_comments.count), data_object_path(dato)

- if current_user.is_curator?
  = link_to("Add", "javascript:submit(0)", :class => "addx", :data_object_id => "#{dato.id}", :path_url => "/data_objects/new?taxon_concept_id=#{@taxon_concept.id}&toc_id=#{dato.toc_items[0].id}&type=text")
  - if !dato.users_data_objects.blank? && dato.users_data_objects[0].user.id == current_user.id
    = link_to("Edit", "javascript:submit(0)", :class =>"editx", :data_object_id => "#{dato.id}", :path_url => "/data_objects/#{dato.id}/edit?taxon_concept_id=#{@taxon_concept.id}&toc_id=#{dato.toc_items[0].id}&type=text" )

/This is the <div> where the user-submitted text add/edit form will be displayed.
%div{:id => "div_#{dato.id}"}


- if defined?(with_javascript)
  :javascript
    $(document).ready(function() {
      //This will update the <div> id with the latest data_object id.
      $("#" + id).attr("id", "#{dato.id}");
    
      $("#div_" + "#{dato.id}").text("--SAVED--");    
  
      //This will scroll to the updated <div>
      $.scrollTo($("#" + "#{dato.id}"), {duration: 1});
      return false;
    });