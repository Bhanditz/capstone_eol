- content_for :main do
  #page_heading.with_image
    .site_column
      .hgroup
        - if @community && ! @community.id.nil?
          -#FIXME what if already a member? what happens to button?
          = link_to I18n.t(:join_community_button), join_community_path(@community.id, :return_to => communities_path(@community.id)), :class => "button"
          = image_tag @community.logo_url, :alt => ""
          %h1= h @community.name
          %p= h @community.description
        - else
          %h1= @page_title || I18n.t(:communities)
  .thumbnails
    -# FIXME: convert this to proper community march of life with meaningful alt tags
    %ul
      - demo_taxa_ids = { 2866150 => 'Amanita muscaria', 17924149 => 'Dinochelus ausubeli', 921737 => 'Haramonas dimorpha', 328607 => 'Canis lupus', 1061748 => 'Pinus strobus', 491753 => 'Anochetus mayri' }
      - demo_taxa_ids.each_with_index do |(id, name), i|
        - unless id == 17924149
          %li= link_to image_tag("v2/temporary_for_mockup/mol_#{id}.jpg", :alt => name), "/pages/#{id}"
      %li.last= link_to image_tag("v2/temporary_for_mockup/mol_17924149.jpg", :alt => demo_taxa_ids[17924149]), "/pages/17924149"
    .term
      .site_column
        %p
  #content
    .site_column
      - if @community && @community.id
        #tabs_sidebar
          %ul.tabs
            %li{:class => resource_is_active('communities/newsfeeds')}= link_to I18n.t(:newsfeed), community_newsfeeds_path(@community.id)
            %li{:class => resource_is_active('communities/contributors')}= link_to I18n.t(:members_with_count, :count => 23), "/placeholder"
            %li{:class => resource_is_active('communities/collections')}= link_to I18n.t(:collections_with_count, :count => 6), community_collections_path(@community.id)
            %li{:class => resource_is_active('communities/pending_members')}= link_to I18n.t(:pending_members_with_count, :count => 2), "/placeholder"
            %li{:class => resource_is_active('communities/pending_collections')}= link_to I18n.t(:pending_collections_with_count, :count => 3), "/placeholder"
      = yield

= render :file => 'layouts/v2/application'
