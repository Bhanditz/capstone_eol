- content_for :main do
  #page_heading.with_nav
    .site_column
      .hgroup
        -# TODO - if we want to indicate vetted status here then for accessibility we will need
        -# a translatable vetted status (trusted, untrusted, not vetted) that is accessible
        -# to assistive technologies e.g. as part of h1 value or perhaps in a title attribute
        %h1
          %i<
            = hh(@taxon_concept.title_canonical(@session_hierarchy))
          %span.assistive<
            = " &mdash; #{@assistive_section_header}"
        - preferred_common_name = @taxon_concept.subtitle(@session_hierarchy)
        %h2{:title => I18n.t(:preferred_common_name_advisory_information)}
          = hh(preferred_common_name) unless preferred_common_name.blank?
          - common_name_count = @taxon_concept.common_names.count
          - if common_name_count > 0
            %small= link_to I18n.t(:common_names_with_count, :count => common_name_count), "/pages/#{@taxon_concept.id}/names/common_names",
              { :title => I18n.t(:common_names_advisory_information) }
          - else
            %small= I18n.t(:common_names_with_count, :count => common_name_count)
      .page_actions
        %ul
          %li
            = render :partial => 'shared/add_to_my_collection', :locals => { :item => @taxon_concept, :my_collection => @watch_collection }
          - if !@dropdown_hierarchy_entry.blank?
            %li= link_to I18n.t(:return_to_the_taxon_concept_page), taxon_overview_path(@taxon_concept.id)
          
      = render :partial => 'shared/flash_messages'
      %ul.nav
        - hierarchy_entry = get_hierarchy_entry_from_path
        - dropdown_hierarchy_entry = @dropdown_hierarchy_entry
        /%li= current_user.id.nil? ? "logged out" : "logged in"
        /%li= current_user.id
        /%li= logged_in?
        /%li= @session_hierarchy.blank? ? "no @session_hierarchy" : "with @session_hierarchy #{@session_hierarchy.id}"
        /%li= request.fullpath
        %li= "[[#{hierarchy_entry}]]"
        %li= @dropdown_hierarchy_entry_id.blank? ? "without ddh" : "with ddh #{@dropdown_hierarchy_entry_id}"
        
        - if @dropdown_hierarchy_entry.blank?
          %li{:class => resource_is_active('taxa/overviews')}= link_to I18n.t(:overview), taxon_overview_path(@taxon_concept.id)
          %li{:class => resource_is_active('taxa/details')}= link_to I18n.t(:detail), taxon_details_path(@taxon_concept.id)
          %li{:class => resource_is_active('taxa/media')}= link_to I18n.t(:media_with_count, :count => @taxon_concept.media({}, dropdown_hierarchy_entry).count), taxon_media_path(@taxon_concept.id)
          %li{:class => resource_is_active('taxa/maps')}= link_to I18n.t(:maps_with_count, :count => @taxon_concept.has_map ? 1 : 0), taxon_maps_path(@taxon_concept.id)
          %li{:class => resource_is_active('taxa/names')}= link_to I18n.t(:names), taxon_names_path(@taxon_concept.id)
          %li{:class => resource_is_active('taxa/community')}= link_to I18n.t(:community), '/placeholder'
          %li{:class => resource_is_active('taxa/resources')}= link_to I18n.t(:resources), '/placeholder'
          %li{:class => resource_is_active('taxa/literature')}= link_to I18n.t(:literature), '/placeholder'
          %li{:class => resource_is_active('taxa/updates')}= link_to I18n.t(:updates), '/placeholder'
        - else
          %li{:class => resource_is_active('taxa/overviews')}= link_to I18n.t(:overview), "/pages/#{@taxon_concept.id}/entries/#{hierarchy_entry}/overview"
          %li{:class => resource_is_active('taxa/details')}= link_to I18n.t(:detail), "/pages/#{@taxon_concept.id}/entries/#{hierarchy_entry}/details"
          %li{:class => resource_is_active('taxa/media')}= link_to I18n.t(:media_with_count, :count => @taxon_concept.media({}, dropdown_hierarchy_entry).count), "/pages/#{@taxon_concept.id}/entries/#{hierarchy_entry}/media"
          %li{:class => resource_is_active('taxa/maps')}= link_to I18n.t(:maps_with_count, :count => @taxon_concept.has_map ? 1 : 0), "/pages/#{@taxon_concept.id}/entries/#{hierarchy_entry}/maps"
          %li{:class => resource_is_active('taxa/names')}= link_to I18n.t(:names), "/pages/#{@taxon_concept.id}/entries/#{hierarchy_entry}/names"
          %li{:class => resource_is_active('taxa/resources')}= link_to I18n.t(:resources), '/placeholder'
          %li{:class => resource_is_active('taxa/literature')}= link_to I18n.t(:literature), '/placeholder'

          
          
          


  #content
    .site_column
      = yield

= render :file => 'layouts/v2/application'
